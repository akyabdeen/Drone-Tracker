export function createDroneMarker(
  canFly: boolean,
  onClick: () => void
): HTMLElement {
  // Main container
  const container = document.createElement("div");
  container.className = "relative flex items-center justify-center";
  container.onclick = onClick;

  // Circle body
  const circle = document.createElement("div");
  circle.className = `w-10 h-10 rounded-full flex items-center justify-center shadow-lg border-2 border-black ${
    canFly ? "bg-green-500" : "bg-red-500"
  }`;

  // SVG (your propeller)
  circle.innerHTML = `
<svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.1994 16.4163C15.3427 16.4461 15.4916 16.4327 15.6273 16.3778C15.763 16.3229 15.8793 16.229 15.9617 16.1079C16.044 15.9868 16.0887 15.8439 16.0899 15.6974C16.0912 15.551 16.049 15.4074 15.9687 15.2849C15.8884 15.1624 15.7737 15.0665 15.6389 15.0093C15.5042 14.9521 15.3555 14.9361 15.2118 14.9635C15.068 14.9908 14.9355 15.0602 14.8312 15.1629C14.7268 15.2656 14.6552 15.397 14.6254 15.5404C14.5855 15.7328 14.6235 15.9331 14.7312 16.0974C14.8388 16.2616 15.0072 16.3764 15.1994 16.4163Z" fill="white"/>
<path d="M11.3753 6.92623C11.2688 6.76364 11.1313 6.62366 10.9707 6.51426C10.8101 6.40486 10.6296 6.32819 10.4394 6.28863C10.2492 6.24907 10.053 6.2474 9.8622 6.2837C9.67136 6.32001 9.48953 6.39358 9.3271 6.50023C9.16466 6.60687 9.0248 6.7445 8.9155 6.90524C8.8062 7.06598 8.7296 7.2467 8.69008 7.43708C8.65055 7.62745 8.64889 7.82375 8.68516 8.01477C8.72144 8.20579 8.79494 8.38779 8.90148 8.55038L10.8685 11.5521C11.5137 12.537 11.7416 13.7382 11.5022 14.8914C11.2628 16.0445 10.5757 17.0553 9.59187 17.7015L6.59297 19.6704C6.43054 19.777 6.29068 19.9146 6.18138 20.0754C6.07208 20.2361 5.99548 20.4168 5.95596 20.6072C5.91643 20.7976 5.91477 20.9939 5.95104 21.1849C5.98731 21.3759 6.06082 21.5579 6.16736 21.7205C6.27391 21.8831 6.4114 22.0231 6.57199 22.1325C6.73259 22.2419 6.91314 22.3186 7.10334 22.3581C7.29353 22.3977 7.48966 22.3993 7.6805 22.363C7.87134 22.3267 8.05317 22.2532 8.2156 22.1465L11.2145 20.1777C12.1986 19.5319 13.3986 19.3037 14.5507 19.5433C15.7028 19.783 16.7127 20.4708 17.3583 21.4555L19.3253 24.4572C19.5405 24.7855 19.8772 25.0149 20.2613 25.0948C20.6454 25.1747 21.0455 25.0985 21.3735 24.8832C21.7016 24.6678 21.9307 24.3308 22.0106 23.9463C22.0904 23.5618 22.0143 23.1614 21.7992 22.833L19.8321 19.8313C19.187 18.8463 18.959 17.6452 19.1984 16.492C19.4378 15.3389 20.1249 14.3281 21.1088 13.6819L24.1077 11.713C24.2701 11.6064 24.41 11.4688 24.5193 11.308C24.6286 11.1473 24.7052 10.9666 24.7447 10.7762C24.7842 10.5858 24.7859 10.3895 24.7496 10.1985C24.7133 10.0075 24.6398 9.82547 24.5333 9.66289C24.4267 9.5003 24.2892 9.36031 24.1286 9.25091C23.968 9.14151 23.7875 9.06485 23.5973 9.02529C23.4071 8.98573 23.211 8.98405 23.0201 9.02036C22.8293 9.05667 22.6475 9.13024 22.485 9.23688L19.4861 11.2057C18.5021 11.8515 17.302 12.0797 16.1499 11.84C14.9978 11.6004 13.9879 10.9126 13.3424 9.92792L11.3753 6.92623ZM15.8012 13.5175C16.2309 13.6069 16.6244 13.8218 16.9321 14.135C17.2398 14.4483 17.4478 14.8458 17.5297 15.2774C17.6116 15.7089 17.5639 16.1551 17.3925 16.5595C17.2211 16.9639 16.9337 17.3084 16.5668 17.5493C16.1998 17.7902 15.7697 17.9168 15.3308 17.9131C14.8919 17.9093 14.4641 17.7754 14.1012 17.5282C13.7384 17.2811 13.457 16.9318 13.2925 16.5245C13.128 16.1173 13.0878 15.6703 13.1771 15.2402C13.2974 14.6636 13.6414 14.1583 14.1336 13.8353C14.6258 13.5123 15.2249 13.3979 15.8012 13.5175Z" fill="white"/>
<path d="M9.02811 23.3837C8.37213 23.8145 7.57206 23.9668 6.80389 23.8071C6.03572 23.6474 5.36238 23.1889 4.932 22.5323C4.50163 21.8757 4.34947 21.0749 4.509 20.306C4.66852 19.5371 5.12667 18.8632 5.78264 18.4324L8.47882 16.6623C7.4579 16.253 6.33316 16.1804 5.26818 16.4551C4.20321 16.7297 3.25351 17.3372 2.55722 18.1892C1.86092 19.0412 1.45434 20.0934 1.39659 21.1926C1.33884 22.2919 1.63293 23.3809 2.2361 24.3014C2.83927 25.2218 3.72006 25.9256 4.75039 26.3106C5.78072 26.6955 6.90686 26.7413 7.96504 26.4415C9.02321 26.1417 9.95824 25.5119 10.6342 24.6435C11.3101 23.7752 11.6916 22.7137 11.7233 21.6134L9.02811 23.3837Z" fill="white"/>
<path d="M8.52303 11.9527C8.82298 12.0154 9.12789 12.0514 9.43419 12.0604L7.66553 9.3627C7.23515 8.70611 7.083 7.90529 7.24253 7.13641C7.40205 6.36753 7.86019 5.69357 8.51617 5.26279C9.17215 4.83202 9.97222 4.67972 10.7404 4.83939C11.5086 4.99907 12.1819 5.45764 12.6123 6.11422L14.3807 8.81289C14.7776 7.82565 14.8612 6.74007 14.6202 5.70361C14.3792 4.66716 13.8253 3.73007 13.0338 3.01965C12.2422 2.30923 11.2514 1.8599 10.1958 1.73271C9.14028 1.60553 8.0712 1.80663 7.13381 2.30873C6.19643 2.81082 5.4362 3.58959 4.95635 4.53919C4.47651 5.48879 4.30033 6.5632 4.45175 7.6165C4.60317 8.6698 5.07483 9.65093 5.80269 10.4266C6.53055 11.2023 7.47931 11.7349 8.5201 11.9521L8.52303 11.9527Z" fill="white"/>
<path d="M22.1778 19.4297C21.8779 19.367 21.5729 19.331 21.2666 19.322L23.0351 22.0207C23.4554 22.6771 23.6001 23.473 23.4377 24.2356C23.2753 24.9982 22.8189 25.6658 22.1676 26.0936C21.5164 26.5214 20.7228 26.6748 19.9592 26.5205C19.1957 26.3661 18.5237 25.9166 18.0893 25.2694L16.3209 22.5707C15.9241 23.5579 15.8404 24.6435 16.0814 25.68C16.3224 26.7164 16.8763 27.6535 17.6678 28.3639C18.4594 29.0743 19.4502 29.5237 20.5058 29.6508C21.5613 29.778 22.6304 29.5769 23.5678 29.0748C24.5052 28.5727 25.2654 27.794 25.7453 26.8444C26.2251 25.8948 26.4013 24.8204 26.2499 23.7671C26.0985 22.7138 25.6268 21.7326 24.8989 20.957C24.1711 20.1813 23.2223 19.6487 22.1815 19.4315L22.1778 19.4297Z" fill="white"/>
<path d="M21.6737 7.99882C21.9985 7.78552 22.3621 7.63836 22.7437 7.56571C23.1254 7.49306 23.5176 7.49636 23.8979 7.57542C24.2783 7.65448 24.6394 7.80775 24.9605 8.02649C25.2817 8.24522 25.5567 8.52514 25.7698 8.85025C25.9829 9.17536 26.13 9.53929 26.2025 9.92128C26.2751 10.3033 26.2718 10.6958 26.1928 11.0765C26.1138 11.4572 25.9607 11.8186 25.7422 12.1401C25.5236 12.4616 25.244 12.7369 24.9192 12.9502L22.222 14.72C23.2429 15.1293 24.3677 15.2019 25.4327 14.9273C26.4976 14.6526 27.4473 14.0452 28.1436 13.1931C28.8399 12.3411 29.2465 11.2889 29.3043 10.1897C29.362 9.09042 29.0679 8.0014 28.4647 7.08096C27.8616 6.16052 26.9808 5.45667 25.9505 5.07177C24.9201 4.68686 23.794 4.64097 22.7358 4.94078C21.6777 5.24058 20.7426 5.87045 20.0667 6.73878C19.3908 7.6071 19.0092 8.6686 18.9775 9.76891L21.6737 7.99882Z" fill="white"/>
</svg>

  `;

  // Triangle pointer
  const triangle = document.createElement("div");
  triangle.className = `absolute -top-2 w-0 h-0 border-l-4 border-r-4 border-b-6 ${
    canFly ? "border-b-green-500" : "border-b-red-500"
  }`;

  // Append
  container.appendChild(circle);
  container.appendChild(triangle);

  return container;
}
